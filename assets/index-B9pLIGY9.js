(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const s={WEATHER_CITY:document.getElementById("city"),WEATHER_TEMPERATURE:document.getElementById("temperature"),WEATHER_DESCRIPTION:document.getElementById("weather-description"),TIME:document.getElementById("time"),DATE:document.getElementById("date"),TODO_INPUT:document.getElementById("todo-input"),TODO_LIST:document.getElementById("todo-list"),REMOVE_COMPLETED:document.getElementById("remove-completed")},E="https://api.openweathermap.org/data/2.5/weather",p="cdbaa2db9a9310e76fa37970cfabeb93";async function l(e){const t=`${E}?q=${e}&appid=${p}&units=metric`;try{return await f(t)}catch{throw alert("Ошибка при получении данных о погоде, скорее всего вы ввели неправильное название города"),new Error("Не удалось получить данные о погоде")}}async function f(e){const n=await(await fetch(e)).json();return s.WEATHER_TEMPERATURE.textContent=Math.round(n.main.temp),s.WEATHER_DESCRIPTION.textContent=n.weather[0].description,n}function h(e){e.preventDefault(),localStorage.setItem("lastSearchedCity",s.WEATHER_CITY.value);const t=localStorage.getItem("lastSearchedCity");l(t)}window.addEventListener("load",()=>{const e="Krasnodar";s.WEATHER_CITY.value=e,l(e)});function m(){const e=new Date,t={day:"numeric",month:"long"},n=e.toLocaleString("ru-RU",t),a=e.toLocaleString("ru-RU",{weekday:"long"});s.TIME.textContent=e.toLocaleTimeString(),s.DATE.textContent=`${n}, ${a}`,setTimeout(m,1e3);const o=e.getHours();o>=0&&o<6?document.body.style.backgroundImage='url("/test-momentum/images/01.jpg")':o>=6&&o<10?document.body.style.backgroundImage='url("/test-momentum/images/02.jpg")':o>=10&&o<18?document.body.style.backgroundImage='url("/test-momentum/images/03.jpg")':document.body.style.backgroundImage='url("/test-momentum/images/04.jpg")'}const y=[{text:"сделать тестовое",status:"done"},{text:"попасть на стажировку",status:"todo"},{text:"пройти стажировку",status:"todo"},{text:"устроиться в компанию",status:"todo"}],c=[],i=e=>{const t=document.createElement("form");t.classList.add("task");const n=document.createElement("input");n.type="checkbox",n.className="input-checkbox",n.checked=e.status==="done",n.addEventListener("change",()=>{n.checked?(t.classList.add("completed"),e.status="done"):(t.classList.remove("completed"),e.status="todo")});const a=document.createElement("p");a.textContent=e.text,a.className="text-task";const o=document.createElement("button");return o.type="button",o.className="delete-task",o.classList.add("delete-task"),t.appendChild(n),t.appendChild(a),t.appendChild(o),s.TODO_LIST.appendChild(t),o.addEventListener("click",()=>{t.remove(),T(e)}),e.checkboxInput=n,t},T=e=>{const t=c.findIndex(n=>n.text===e.text&&n.priority===e.priority);t!==-1&&c.splice(t,1)};let u=!1;async function g(){try{u||(y.forEach(e=>{const t={text:e.text,status:e.status};c.push(t),i(t)}),u=!0)}catch(e){console.error("Ошибка при загрузке данных из JSON:",e)}}s.TODO_INPUT.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();const t=s.TODO_INPUT.value,n={text:t,status:"todo"};t?(c.push(n),i(n),s.TODO_INPUT.value=""):alert("Задача не может быть пустой")}});s.REMOVE_COMPLETED.addEventListener("click",()=>{c.filter(t=>t.status==="done"&&t.checkboxInput.checked).forEach(t=>{const n=c.indexOf(t);n!==-1&&c.splice(n,1)}),s.TODO_LIST.innerHTML="",c.forEach(t=>{i(t)})});s.WEATHER_CITY.addEventListener("keydown",e=>{e.key==="Enter"&&h(e)});m();g();
